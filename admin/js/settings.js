!function(t){var e={};function l(n){if(e[n])return e[n].exports;var d=e[n]={i:n,l:!1,exports:{}};return t[n].call(d.exports,d,d.exports,l),d.l=!0,d.exports}l.m=t,l.c=e,l.d=function(t,e,n){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},l.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var d in t)l.d(n,d,function(e){return t[e]}.bind(null,d));return n},l.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="",l(l.s=11)}({11:function(module,exports){eval("(function () {\n\t'use strict';\n\n\tlet usersList = document.getElementById('calendarp-users');\n\tlet allowUserButton = document.getElementById('allow-user-add');\n\tlet allowUserSelector = document.getElementById('allow-user');\n\n\t/**\n\t * Make an AJAX call\n\t */\n\tfunction call(action, data) {\n\t\tdata.action = action;\n\t\tdata.nonce = calendarpSettings.nonce;\n\t\treturn jQuery.post(ajaxurl, data);\n\t}\n\n\t/**\n\t * Remove a user row\n\t */\n\tfunction removeUserRowElement(id) {\n\t\tif (confirm('Are you sure?')) {\n\t\t\tlet element = document.getElementById('calendarp-' + id);\n\t\t\tif (element) {\n\t\t\t\telement.parentNode.removeChild(element);\n\t\t\t\tcall('calendarp_remove_user', {id: id});\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Create a new user row\n\t */\n\tfunction addUserRowElement(user) {\n\t\tlet listNode, linkNode, removeNode, spanNode;\n\n\t\t// Create the list item\n\t\tlistNode = document.createElement('li');\n\t\tlistNode.id = 'calendarp-' + user.id;\n\n\t\tif (user.link) {\n\t\t\t// User has edit link\n\t\t\tlinkNode = document.createElement('a');\n\t\t\tlinkNode.href = user.link;\n\t\t\tlinkNode.innerHTML = user.name;\n\t\t\tlinkNode.title = user.linkTitle;\n\t\t\tlistNode.appendChild(linkNode);\n\t\t}\n\t\telse {\n\t\t\tspanNode = document.createElement('span');\n\t\t\tspanNode.innerHTML = user.name;\n\t\t\tlistNode.appendChild(spanNode);\n\t\t}\n\n\t\tif (user.removable) {\n\t\t\t// The remove link. Only for users that are not the current one\n\t\t\tremoveNode = document.createElement('a');\n\t\t\tremoveNode.setAttribute('data-id', user.id);\n\t\t\tremoveNode.href = '#';\n\t\t\tremoveNode.className = 'dashicons-no-alt dashicons';\n\t\t\tremoveNode.title = calendarpSettings.removeTitle;\n\t\t\tremoveNode.addEventListener('click', function (e) {\n\t\t\t\t// Remove the list item on click\n\t\t\t\te.preventDefault();\n\t\t\t\tremoveUserRowElement(this.getAttribute('data-id'));\n\t\t\t});\n\t\t\tlistNode.appendChild(removeNode);\n\t\t}\n\n\n\t\tusersList.appendChild(listNode);\n\t}\n\n\tcalendarpSettings.usersList.forEach(addUserRowElement);\n\n\tif (allowUserSelector) {\n\t\t// Toggle allow button when the select changes\n\t\tallowUserSelector.addEventListener('change', function () {\n\t\t\tlet className = 'hidden';\n\t\t\tif (this.value) {\n\t\t\t\tif (allowUserButton.classList)\n\t\t\t\t\tallowUserButton.classList.remove(className);\n\t\t\t\telse\n\t\t\t\t\tallowUserButton.className = el.className.replace(new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' ');\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (allowUserButton.classList) {\n\t\t\t\t\tallowUserButton.classList.add(className);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tallowUserButton.className += ' ' + className;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Add new user when clicking on Allow button\n\t\tallowUserButton.addEventListener('click', function (e) {\n\t\t\te.preventDefault();\n\t\t\tthis.setAttribute('disabled', 'disabled');\n\t\t\tcall('calendarp_add_new_allowed_user', {id: allowUserSelector.value})\n\t\t\t\t.always(function (response) {\n\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\taddUserRowElement(response.data);\n\t\t\t\t\t}\n\t\t\t\t\tallowUserButton.removeAttribute('disabled');\n\t\t\t\t});\n\t\t});\n\t}\n\n}());\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9fc3JjL2FkbWluL3NldHRpbmdzL3NldHRpbmdzLmpzPzQxZTMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLE9BQU87QUFDMUM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLDRCQUE0QjtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDs7QUFFQSxDQUFDIiwiZmlsZSI6IjExLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdGxldCB1c2Vyc0xpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FsZW5kYXJwLXVzZXJzJyk7XG5cdGxldCBhbGxvd1VzZXJCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWxsb3ctdXNlci1hZGQnKTtcblx0bGV0IGFsbG93VXNlclNlbGVjdG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FsbG93LXVzZXInKTtcblxuXHQvKipcblx0ICogTWFrZSBhbiBBSkFYIGNhbGxcblx0ICovXG5cdGZ1bmN0aW9uIGNhbGwoYWN0aW9uLCBkYXRhKSB7XG5cdFx0ZGF0YS5hY3Rpb24gPSBhY3Rpb247XG5cdFx0ZGF0YS5ub25jZSA9IGNhbGVuZGFycFNldHRpbmdzLm5vbmNlO1xuXHRcdHJldHVybiBqUXVlcnkucG9zdChhamF4dXJsLCBkYXRhKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZW1vdmUgYSB1c2VyIHJvd1xuXHQgKi9cblx0ZnVuY3Rpb24gcmVtb3ZlVXNlclJvd0VsZW1lbnQoaWQpIHtcblx0XHRpZiAoY29uZmlybSgnQXJlIHlvdSBzdXJlPycpKSB7XG5cdFx0XHRsZXQgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYWxlbmRhcnAtJyArIGlkKTtcblx0XHRcdGlmIChlbGVtZW50KSB7XG5cdFx0XHRcdGVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbGVtZW50KTtcblx0XHRcdFx0Y2FsbCgnY2FsZW5kYXJwX3JlbW92ZV91c2VyJywge2lkOiBpZH0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBDcmVhdGUgYSBuZXcgdXNlciByb3dcblx0ICovXG5cdGZ1bmN0aW9uIGFkZFVzZXJSb3dFbGVtZW50KHVzZXIpIHtcblx0XHRsZXQgbGlzdE5vZGUsIGxpbmtOb2RlLCByZW1vdmVOb2RlLCBzcGFuTm9kZTtcblxuXHRcdC8vIENyZWF0ZSB0aGUgbGlzdCBpdGVtXG5cdFx0bGlzdE5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuXHRcdGxpc3ROb2RlLmlkID0gJ2NhbGVuZGFycC0nICsgdXNlci5pZDtcblxuXHRcdGlmICh1c2VyLmxpbmspIHtcblx0XHRcdC8vIFVzZXIgaGFzIGVkaXQgbGlua1xuXHRcdFx0bGlua05vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG5cdFx0XHRsaW5rTm9kZS5ocmVmID0gdXNlci5saW5rO1xuXHRcdFx0bGlua05vZGUuaW5uZXJIVE1MID0gdXNlci5uYW1lO1xuXHRcdFx0bGlua05vZGUudGl0bGUgPSB1c2VyLmxpbmtUaXRsZTtcblx0XHRcdGxpc3ROb2RlLmFwcGVuZENoaWxkKGxpbmtOb2RlKTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRzcGFuTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcblx0XHRcdHNwYW5Ob2RlLmlubmVySFRNTCA9IHVzZXIubmFtZTtcblx0XHRcdGxpc3ROb2RlLmFwcGVuZENoaWxkKHNwYW5Ob2RlKTtcblx0XHR9XG5cblx0XHRpZiAodXNlci5yZW1vdmFibGUpIHtcblx0XHRcdC8vIFRoZSByZW1vdmUgbGluay4gT25seSBmb3IgdXNlcnMgdGhhdCBhcmUgbm90IHRoZSBjdXJyZW50IG9uZVxuXHRcdFx0cmVtb3ZlTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcblx0XHRcdHJlbW92ZU5vZGUuc2V0QXR0cmlidXRlKCdkYXRhLWlkJywgdXNlci5pZCk7XG5cdFx0XHRyZW1vdmVOb2RlLmhyZWYgPSAnIyc7XG5cdFx0XHRyZW1vdmVOb2RlLmNsYXNzTmFtZSA9ICdkYXNoaWNvbnMtbm8tYWx0IGRhc2hpY29ucyc7XG5cdFx0XHRyZW1vdmVOb2RlLnRpdGxlID0gY2FsZW5kYXJwU2V0dGluZ3MucmVtb3ZlVGl0bGU7XG5cdFx0XHRyZW1vdmVOb2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0Ly8gUmVtb3ZlIHRoZSBsaXN0IGl0ZW0gb24gY2xpY2tcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRyZW1vdmVVc2VyUm93RWxlbWVudCh0aGlzLmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpKTtcblx0XHRcdH0pO1xuXHRcdFx0bGlzdE5vZGUuYXBwZW5kQ2hpbGQocmVtb3ZlTm9kZSk7XG5cdFx0fVxuXG5cblx0XHR1c2Vyc0xpc3QuYXBwZW5kQ2hpbGQobGlzdE5vZGUpO1xuXHR9XG5cblx0Y2FsZW5kYXJwU2V0dGluZ3MudXNlcnNMaXN0LmZvckVhY2goYWRkVXNlclJvd0VsZW1lbnQpO1xuXG5cdGlmIChhbGxvd1VzZXJTZWxlY3Rvcikge1xuXHRcdC8vIFRvZ2dsZSBhbGxvdyBidXR0b24gd2hlbiB0aGUgc2VsZWN0IGNoYW5nZXNcblx0XHRhbGxvd1VzZXJTZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRsZXQgY2xhc3NOYW1lID0gJ2hpZGRlbic7XG5cdFx0XHRpZiAodGhpcy52YWx1ZSkge1xuXHRcdFx0XHRpZiAoYWxsb3dVc2VyQnV0dG9uLmNsYXNzTGlzdClcblx0XHRcdFx0XHRhbGxvd1VzZXJCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0YWxsb3dVc2VyQnV0dG9uLmNsYXNzTmFtZSA9IGVsLmNsYXNzTmFtZS5yZXBsYWNlKG5ldyBSZWdFeHAoJyhefFxcXFxiKScgKyBjbGFzc05hbWUuc3BsaXQoJyAnKS5qb2luKCd8JykgKyAnKFxcXFxifCQpJywgJ2dpJyksICcgJyk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0aWYgKGFsbG93VXNlckJ1dHRvbi5jbGFzc0xpc3QpIHtcblx0XHRcdFx0XHRhbGxvd1VzZXJCdXR0b24uY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdGFsbG93VXNlckJ1dHRvbi5jbGFzc05hbWUgKz0gJyAnICsgY2xhc3NOYW1lO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBBZGQgbmV3IHVzZXIgd2hlbiBjbGlja2luZyBvbiBBbGxvdyBidXR0b25cblx0XHRhbGxvd1VzZXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0dGhpcy5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG5cdFx0XHRjYWxsKCdjYWxlbmRhcnBfYWRkX25ld19hbGxvd2VkX3VzZXInLCB7aWQ6IGFsbG93VXNlclNlbGVjdG9yLnZhbHVlfSlcblx0XHRcdFx0LmFsd2F5cyhmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0XHRcdFx0XHRpZiAocmVzcG9uc2Uuc3VjY2Vzcykge1xuXHRcdFx0XHRcdFx0YWRkVXNlclJvd0VsZW1lbnQocmVzcG9uc2UuZGF0YSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGFsbG93VXNlckJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG5cdFx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cbn0oKSk7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///11\n")}});