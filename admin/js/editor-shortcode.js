jQuery,tinymce.PluginManager.add("calendarp_shortcodes",(function(e){let t=tinymce.activeEditor,a=function(e,t){let a=[];for(let n in e)e.hasOwnProperty(n)&&a.push({type:"checkbox",name:t+e[n].value,text:e[n].text,value:e[n].value});return a},n=t.getLang("calendarp_l10n.category_field_values"),l=t.getLang("calendarp_l10n.tag_field_values"),o=a(n,"category_"),_=a(l,"tag_"),r=n,d=[{text:t.getLang("calendarp_l10n.calendar_title"),onclick:function(){e.windowManager.open({title:t.getLang("calendarp_l10n.calendar_title"),body:[{type:"infobox",classes:"categories-infobox",minHeight:50,border:"none"},{type:"container",name:"categories_list_start",label:t.getLang("calendarp_l10n.category_field_title"),items:o,html:'<div class="calp_mce_categories_list">'},{type:"container",name:"categories_list_end",label:"",html:"</div>"},{type:"listbox",name:"default_view_field",label:t.getLang("calendarp_l10n.default_view_title"),values:t.getLang("calendarp_l10n.default_view_values")},{type:"listbox",name:"time_format",label:"Time format",values:[{text:"11:00 pm",value:"g:i a"},{text:"23:00",value:"H:i"}]},{type:"listbox",name:"dow_format",label:"Day of the week format",values:[{text:"Sunday",value:"l"},{text:"Sun",value:"D"}]},{type:"listbox",name:"month_name_format",label:"Month name format",values:[{text:"Jan",value:"M"},{text:"January",value:"F"}]},{type:"listbox",name:"day_format",label:"Day format",values:[{text:"09",value:"d"},{text:"9",value:"j"}]},{type:"listbox",name:"date_format",label:"Date format",values:[{text:"15/09",value:"d/m"},{text:"15/9",value:"j/n"},{text:"09/15",value:"m/d"},{text:"9/15",value:"n/j"}]},{type:"infobox",classes:"day-format-infobox",minHeight:34,border:"none"}],onopen:function(e){e.target.$el.find(".mce-day-format-infobox").append('<a target="_blank" href="https://codex.wordpress.org/Formatting_Date_and_Time">Documentation on date and time formatting</a>').css({color:"#0073aa"}),e.target.$el.find(".mce-categories-infobox").prepend("<p>"+t.getLang("calendarp_l10n.category_field_info")+"</p>")},onsubmit:function(a){let n,l,o,_,d,c,s,m;for(i in o=[],r)r.hasOwnProperty(i)&&!0===a.data["category_"+r[i].value]&&o.push(r[i].value);n=0!==o.length?' category="'+o.join(",")+'"':"",l="month"!==a.data.default_view_field?' view="'+a.data.default_view_field+'"':"",_=a.data.time_format!==t.getLang("calendarp_l10n.default_time_format")?' time_format="'+a.data.time_format+'"':"",d="l"!==a.data.dow_format?' dow_format="'+a.data.dow_format+'"':"",c="M"!==a.data.month_name_format?' month_name_format="'+a.data.month_name_format+'"':"",s="d"!==a.data.day_format?' day_format="'+a.data.day_format+'"':"",m="d/m"!==a.data.date_format?' date_format="'+a.data.date_format+'"':"",e.insertContent("[calendarp-calendar"+n+l+_+d+c+m+s+"]")}})}},{text:t.getLang("calendarp_l10n.events_by_cat_title"),onclick:function(){e.windowManager.open({title:t.getLang("calendarp_l10n.events_by_cat_title"),body:[{type:"infobox",classes:"categories-infobox",minHeight:50,border:"none"},{type:"container",name:"events_by_cat_categories_list_start",label:t.getLang("calendarp_l10n.events_by_cat_category_field_title"),items:o,html:'<div class="calp_mce_categories_list">'},{type:"container",name:"events_by_cat_categories_list_end",label:"",html:"</div>"},{type:"container",name:"events_by_cat_tags_list_start",label:t.getLang("calendarp_l10n.events_by_cat_tag_field_title"),items:_,html:'<div class="calp_mce_tags_list">'},{type:"container",name:"events_by_cat_tags_list_end",label:"",html:"</div>"},{type:"textbox",name:"events_by_cat_events_count_field",label:t.getLang("calendarp_l10n.events_by_cat_events_count_field_title"),value:"0",maxLength:3,size:3}],onopen:function(e){e.target.$el.find(".mce-categories-infobox").prepend("<p>"+t.getLang("calendarp_l10n.events_by_cat_info")+"</p>")},onsubmit:function(t){let a=function(e,a){let n=[];for(let l in e)e.hasOwnProperty(l)&&!0===t.data[a+e[l].value]&&n.push(e[l].value);return n},i=a(n,"category_"),o=a(l,"tag_"),_=0===i.length?"":' category="'+i.join(",")+'"',r=0===o.length?"":' tag="'+o.join(",")+'"',d="0"!==t.data.events_by_cat_events_count_field?' events="'+t.data.events_by_cat_events_count_field+'"':"";e.insertContent("[calendarp-events-list"+_+r+d+"]")}})}},{text:t.getLang("calendarp_l10n.single_event_title"),onclick:function(){e.windowManager.open({title:t.getLang("calendarp_l10n.single_event_title"),body:[{type:"textbox",name:"event_title",classes:"event-title-field",label:t.getLang("calendarp_l10n.search_event"),value:"",size:25},{type:"textbox",name:"event_id",classes:"event-id-field",value:"",hidden:!0}],onopen:function(e){let a=jQuery(e.target.$el.find(".mce-event-title-field"));a.attr("placeholder",t.getLang("calendarp_l10n.search_event_by_title"));let n=jQuery(e.target.$el.find(".mce-event-id-field"));a.autocomplete({source:function(e,t){(new wp.api.collections.Calendar_event).fetch({data:{search:e.term}}).done((function(e){let a,n=e.length,l=[];for(a=0;a<n;a++)l.push({id:e[a].id,label:jQuery("<span />").html(e[a].title.rendered).text()});t(l)}))},appendTo:a.parent(),search:function(){n.val("")},select:function(e,t){n.val(t.item.id)}})},onsubmit:function(t){let a;a="all"!=t.data.event_id?' event_id="'+t.data.event_id+'"':"",e.insertContent("[calendarp-event"+a+"]")}})}}];e.addButton("calendarp_shortcodes",{icon:"mce-i-calendarp",menu:d,type:"menubutton"})}));
//# sourceMappingURL=editor-shortcode.js.map