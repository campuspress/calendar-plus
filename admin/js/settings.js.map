{"version":3,"file":"settings.js","mappings":"CAAC,WACA,aAEA,IAAIA,EAAYC,SAASC,eAAe,mBACpCC,EAAkBF,SAASC,eAAe,kBAC1CE,EAAoBH,SAASC,eAAe,cAKhD,SAASG,EAAKC,EAAQC,GAGrB,OAFAA,EAAKD,OAASA,EACdC,EAAKC,MAAQC,kBAAkBD,MACxBE,OAAOC,KAAKC,QAASL,EAC7B,CAkBA,SAASM,EAAkBC,GAC1B,IAAIC,EAAUC,EAAUC,EAAYC,EAGpCH,EAAWd,SAASkB,cAAc,MAClCJ,EAASK,GAAK,aAAeN,EAAKM,GAE9BN,EAAKO,MAERL,EAAWf,SAASkB,cAAc,KAClCH,EAASM,KAAOR,EAAKO,KACrBL,EAASO,UAAYT,EAAKU,KAC1BR,EAASS,MAAQX,EAAKY,UACtBX,EAASY,YAAYX,KAGrBE,EAAWjB,SAASkB,cAAc,QAClCD,EAASK,UAAYT,EAAKU,KAC1BT,EAASY,YAAYT,IAGlBJ,EAAKc,YAERX,EAAahB,SAASkB,cAAc,KACpCF,EAAWY,aAAa,UAAWf,EAAKM,IACxCH,EAAWK,KAAO,IAClBL,EAAWa,UAAY,6BACvBb,EAAWQ,MAAQhB,kBAAkBsB,YACrCd,EAAWe,iBAAiB,SAAS,SAAUC,GAE9CA,EAAEC,iBA3CL,SAA8Bd,GAC7B,GAAIe,QAAQ,iBAAkB,CAC7B,IAAIC,EAAUnC,SAASC,eAAe,aAAekB,GACjDgB,IACHA,EAAQC,WAAWC,YAAYF,GAC/B/B,EAAK,wBAAyB,CAACe,GAAIA,IAErC,CACD,CAoCGmB,CAAqBC,KAAKC,aAAa,WACxC,IACA1B,EAASY,YAAYV,IAItBjB,EAAU2B,YAAYZ,EACvB,CAEAN,kBAAkBT,UAAU0C,QAAQ7B,GAEhCT,IAEHA,EAAkB4B,iBAAiB,UAAU,WAC5C,IAAIF,EAAY,SACZU,KAAKG,MACJxC,EAAgByC,UACnBzC,EAAgByC,UAAUC,OAAOf,GAEjC3B,EAAgB2B,UAAYgB,GAAGhB,UAAUiB,QAAQ,IAAIC,OAAO,UAAYlB,EAAUmB,MAAM,KAAKC,KAAK,KAAO,UAAW,MAAO,KAGxH/C,EAAgByC,UACnBzC,EAAgByC,UAAUO,IAAIrB,GAG9B3B,EAAgB2B,WAAa,IAAMA,CAGtC,IAGA3B,EAAgB6B,iBAAiB,SAAS,SAAUC,GACnDA,EAAEC,iBACFM,KAAKX,aAAa,WAAY,YAC9BxB,EAAK,iCAAkC,CAACe,GAAIhB,EAAkBuC,QAC5DS,QAAO,SAAUC,GACbA,EAASC,SACZzC,EAAkBwC,EAAS9C,MAE5BJ,EAAgBoD,gBAAgB,WACjC,GACF,IAGF,CA5GA","sources":["webpack://calendar-plus/./_src/admin/settings/settings.js"],"sourcesContent":["(function () {\n\t'use strict';\n\n\tlet usersList = document.getElementById('calendarp-users');\n\tlet allowUserButton = document.getElementById('allow-user-add');\n\tlet allowUserSelector = document.getElementById('allow-user');\n\n\t/**\n\t * Make an AJAX call\n\t */\n\tfunction call(action, data) {\n\t\tdata.action = action;\n\t\tdata.nonce = calendarpSettings.nonce;\n\t\treturn jQuery.post(ajaxurl, data);\n\t}\n\n\t/**\n\t * Remove a user row\n\t */\n\tfunction removeUserRowElement(id) {\n\t\tif (confirm('Are you sure?')) {\n\t\t\tlet element = document.getElementById('calendarp-' + id);\n\t\t\tif (element) {\n\t\t\t\telement.parentNode.removeChild(element);\n\t\t\t\tcall('calendarp_remove_user', {id: id});\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Create a new user row\n\t */\n\tfunction addUserRowElement(user) {\n\t\tlet listNode, linkNode, removeNode, spanNode;\n\n\t\t// Create the list item\n\t\tlistNode = document.createElement('li');\n\t\tlistNode.id = 'calendarp-' + user.id;\n\n\t\tif (user.link) {\n\t\t\t// User has edit link\n\t\t\tlinkNode = document.createElement('a');\n\t\t\tlinkNode.href = user.link;\n\t\t\tlinkNode.innerHTML = user.name;\n\t\t\tlinkNode.title = user.linkTitle;\n\t\t\tlistNode.appendChild(linkNode);\n\t\t}\n\t\telse {\n\t\t\tspanNode = document.createElement('span');\n\t\t\tspanNode.innerHTML = user.name;\n\t\t\tlistNode.appendChild(spanNode);\n\t\t}\n\n\t\tif (user.removable) {\n\t\t\t// The remove link. Only for users that are not the current one\n\t\t\tremoveNode = document.createElement('a');\n\t\t\tremoveNode.setAttribute('data-id', user.id);\n\t\t\tremoveNode.href = '#';\n\t\t\tremoveNode.className = 'dashicons-no-alt dashicons';\n\t\t\tremoveNode.title = calendarpSettings.removeTitle;\n\t\t\tremoveNode.addEventListener('click', function (e) {\n\t\t\t\t// Remove the list item on click\n\t\t\t\te.preventDefault();\n\t\t\t\tremoveUserRowElement(this.getAttribute('data-id'));\n\t\t\t});\n\t\t\tlistNode.appendChild(removeNode);\n\t\t}\n\n\n\t\tusersList.appendChild(listNode);\n\t}\n\n\tcalendarpSettings.usersList.forEach(addUserRowElement);\n\n\tif (allowUserSelector) {\n\t\t// Toggle allow button when the select changes\n\t\tallowUserSelector.addEventListener('change', function () {\n\t\t\tlet className = 'hidden';\n\t\t\tif (this.value) {\n\t\t\t\tif (allowUserButton.classList)\n\t\t\t\t\tallowUserButton.classList.remove(className);\n\t\t\t\telse\n\t\t\t\t\tallowUserButton.className = el.className.replace(new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' ');\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (allowUserButton.classList) {\n\t\t\t\t\tallowUserButton.classList.add(className);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tallowUserButton.className += ' ' + className;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Add new user when clicking on Allow button\n\t\tallowUserButton.addEventListener('click', function (e) {\n\t\t\te.preventDefault();\n\t\t\tthis.setAttribute('disabled', 'disabled');\n\t\t\tcall('calendarp_add_new_allowed_user', {id: allowUserSelector.value})\n\t\t\t\t.always(function (response) {\n\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\taddUserRowElement(response.data);\n\t\t\t\t\t}\n\t\t\t\t\tallowUserButton.removeAttribute('disabled');\n\t\t\t\t});\n\t\t});\n\t}\n\n}());\n"],"names":["usersList","document","getElementById","allowUserButton","allowUserSelector","call","action","data","nonce","calendarpSettings","jQuery","post","ajaxurl","addUserRowElement","user","listNode","linkNode","removeNode","spanNode","createElement","id","link","href","innerHTML","name","title","linkTitle","appendChild","removable","setAttribute","className","removeTitle","addEventListener","e","preventDefault","confirm","element","parentNode","removeChild","removeUserRowElement","this","getAttribute","forEach","value","classList","remove","el","replace","RegExp","split","join","add","always","response","success","removeAttribute"],"sourceRoot":""}