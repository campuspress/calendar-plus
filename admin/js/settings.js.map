{"version":3,"file":"settings.js","mappings":"CAAC,WACA,aAEA,IAAIA,EAAYC,SAASC,eAAe,mBACpCC,EAAkBF,SAASC,eAAe,kBAC1CE,EAAoBH,SAASC,eAAe,cAKhD,SAASG,EAAKC,EAAQC,GAGrB,OAFAA,EAAKD,OAASA,EACdC,EAAKC,MAAQC,kBAAkBD,MACxBE,OAAOC,KAAKC,QAASL,EAC7B,CAkBA,SAASM,EAAkBC,GAC1B,IAAIC,EAAUC,EAAUC,EAAYC,EAGpCH,EAAWd,SAASkB,cAAc,MAClCJ,EAASK,GAAK,aAAeN,EAAKM,GAE9BN,EAAKO,MAERL,EAAWf,SAASkB,cAAc,KAClCH,EAASM,KAAOR,EAAKO,KACrBL,EAASO,UAAYT,EAAKU,KAC1BR,EAASS,MAAQX,EAAKY,UACtBX,EAASY,YAAYX,KAGrBE,EAAWjB,SAASkB,cAAc,QAClCD,EAASK,UAAYT,EAAKU,KAC1BT,EAASY,YAAYT,IAGlBJ,EAAKc,YAERX,EAAahB,SAASkB,cAAc,KACpCF,EAAWY,aAAa,UAAWf,EAAKM,IACxCH,EAAWK,KAAO,IAClBL,EAAWa,UAAY,6BACvBb,EAAWQ,MAAQhB,kBAAkBsB,YACrCd,EAAWe,iBAAiB,SAAS,SAAUC,GAE9CA,EAAEC,iBA3CL,SAA8Bd,GAC7B,GAAIe,QAAQ,iBAAkB,CAC7B,IAAIC,EAAUnC,SAASC,eAAe,aAAekB,GACjDgB,IACHA,EAAQC,WAAWC,YAAYF,GAC/B/B,EAAK,wBAAyB,CAACe,GAAIA,IAErC,CACD,CAoCGmB,CAAqBC,KAAKC,aAAa,WACxC,IACA1B,EAASY,YAAYV,IAItBjB,EAAU2B,YAAYZ,EACvB,CAEAN,kBAAkBT,UAAU0C,QAAQ7B,GAEhCT,IAEHA,EAAkB4B,iBAAiB,UAAU,WAC5C,IAAIF,EAAY,SACZU,KAAKG,MACJxC,EAAgByC,UACnBzC,EAAgByC,UAAUC,OAAOf,GAEjC3B,EAAgB2B,UAAYgB,GAAGhB,UAAUiB,QAAQ,IAAIC,OAAO,UAAYlB,EAAUmB,MAAM,KAAKC,KAAK,KAAO,UAAW,MAAO,KAGxH/C,EAAgByC,UACnBzC,EAAgByC,UAAUO,IAAIrB,GAG9B3B,EAAgB2B,WAAa,IAAMA,CAGtC,IAGA3B,EAAgB6B,iBAAiB,SAAS,SAAUC,GACnDA,EAAEC,iBACFM,KAAKX,aAAa,WAAY,YAC9BxB,EAAK,iCAAkC,CAACe,GAAIhB,EAAkBuC,QAC5DS,QAAO,SAAUC,GACbA,EAASC,SACZzC,EAAkBwC,EAAS9C,MAE5BJ,EAAgBoD,gBAAgB,WACjC,GACF,IAGF,CA5GA","sources":["webpack://calendar-plus/./_src/admin/settings/settings.js"],"sourcesContent":["(function () {\r\n\t'use strict';\r\n\r\n\tlet usersList = document.getElementById('calendarp-users');\r\n\tlet allowUserButton = document.getElementById('allow-user-add');\r\n\tlet allowUserSelector = document.getElementById('allow-user');\r\n\r\n\t/**\r\n\t * Make an AJAX call\r\n\t */\r\n\tfunction call(action, data) {\r\n\t\tdata.action = action;\r\n\t\tdata.nonce = calendarpSettings.nonce;\r\n\t\treturn jQuery.post(ajaxurl, data);\r\n\t}\r\n\r\n\t/**\r\n\t * Remove a user row\r\n\t */\r\n\tfunction removeUserRowElement(id) {\r\n\t\tif (confirm('Are you sure?')) {\r\n\t\t\tlet element = document.getElementById('calendarp-' + id);\r\n\t\t\tif (element) {\r\n\t\t\t\telement.parentNode.removeChild(element);\r\n\t\t\t\tcall('calendarp_remove_user', {id: id});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Create a new user row\r\n\t */\r\n\tfunction addUserRowElement(user) {\r\n\t\tlet listNode, linkNode, removeNode, spanNode;\r\n\r\n\t\t// Create the list item\r\n\t\tlistNode = document.createElement('li');\r\n\t\tlistNode.id = 'calendarp-' + user.id;\r\n\r\n\t\tif (user.link) {\r\n\t\t\t// User has edit link\r\n\t\t\tlinkNode = document.createElement('a');\r\n\t\t\tlinkNode.href = user.link;\r\n\t\t\tlinkNode.innerHTML = user.name;\r\n\t\t\tlinkNode.title = user.linkTitle;\r\n\t\t\tlistNode.appendChild(linkNode);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tspanNode = document.createElement('span');\r\n\t\t\tspanNode.innerHTML = user.name;\r\n\t\t\tlistNode.appendChild(spanNode);\r\n\t\t}\r\n\r\n\t\tif (user.removable) {\r\n\t\t\t// The remove link. Only for users that are not the current one\r\n\t\t\tremoveNode = document.createElement('a');\r\n\t\t\tremoveNode.setAttribute('data-id', user.id);\r\n\t\t\tremoveNode.href = '#';\r\n\t\t\tremoveNode.className = 'dashicons-no-alt dashicons';\r\n\t\t\tremoveNode.title = calendarpSettings.removeTitle;\r\n\t\t\tremoveNode.addEventListener('click', function (e) {\r\n\t\t\t\t// Remove the list item on click\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tremoveUserRowElement(this.getAttribute('data-id'));\r\n\t\t\t});\r\n\t\t\tlistNode.appendChild(removeNode);\r\n\t\t}\r\n\r\n\r\n\t\tusersList.appendChild(listNode);\r\n\t}\r\n\r\n\tcalendarpSettings.usersList.forEach(addUserRowElement);\r\n\r\n\tif (allowUserSelector) {\r\n\t\t// Toggle allow button when the select changes\r\n\t\tallowUserSelector.addEventListener('change', function () {\r\n\t\t\tlet className = 'hidden';\r\n\t\t\tif (this.value) {\r\n\t\t\t\tif (allowUserButton.classList)\r\n\t\t\t\t\tallowUserButton.classList.remove(className);\r\n\t\t\t\telse\r\n\t\t\t\t\tallowUserButton.className = el.className.replace(new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' ');\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (allowUserButton.classList) {\r\n\t\t\t\t\tallowUserButton.classList.add(className);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tallowUserButton.className += ' ' + className;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// Add new user when clicking on Allow button\r\n\t\tallowUserButton.addEventListener('click', function (e) {\r\n\t\t\te.preventDefault();\r\n\t\t\tthis.setAttribute('disabled', 'disabled');\r\n\t\t\tcall('calendarp_add_new_allowed_user', {id: allowUserSelector.value})\r\n\t\t\t\t.always(function (response) {\r\n\t\t\t\t\tif (response.success) {\r\n\t\t\t\t\t\taddUserRowElement(response.data);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tallowUserButton.removeAttribute('disabled');\r\n\t\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n}());\r\n"],"names":["usersList","document","getElementById","allowUserButton","allowUserSelector","call","action","data","nonce","calendarpSettings","jQuery","post","ajaxurl","addUserRowElement","user","listNode","linkNode","removeNode","spanNode","createElement","id","link","href","innerHTML","name","title","linkTitle","appendChild","removable","setAttribute","className","removeTitle","addEventListener","e","preventDefault","confirm","element","parentNode","removeChild","removeUserRowElement","this","getAttribute","forEach","value","classList","remove","el","replace","RegExp","split","join","add","always","response","success","removeAttribute"],"sourceRoot":""}