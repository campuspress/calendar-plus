!function(g){var I={};function C(A){if(I[A])return I[A].exports;var e=I[A]={i:A,l:!1,exports:{}};return g[A].call(e.exports,e,e.exports,C),e.l=!0,e.exports}C.m=g,C.c=I,C.d=function(g,I,A){C.o(g,I)||Object.defineProperty(g,I,{enumerable:!0,get:A})},C.r=function(g){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},C.t=function(g,I){if(1&I&&(g=C(g)),8&I)return g;if(4&I&&"object"==typeof g&&g&&g.__esModule)return g;var A=Object.create(null);if(C.r(A),Object.defineProperty(A,"default",{enumerable:!0,value:g}),2&I&&"string"!=typeof g)for(var e in g)C.d(A,e,function(I){return g[I]}.bind(null,e));return A},C.n=function(g){var I=g&&g.__esModule?function(){return g.default}:function(){return g};return C.d(I,"a",I),I},C.o=function(g,I){return Object.prototype.hasOwnProperty.call(g,I)},C.p="",C(C.s=13)}({13:function(module,exports){eval("const {registerBlockType} = wp.blocks;\nconst {createElement, useState} = wp.element;\nconst {__} = wp.i18n;\nconst {InspectorControls} = wp.editor;\nconst {\n    TextControl,\n    RangeControl,\n    SelectControl,\n    PanelBody,\n    __experimentalHeading,\n    __experimentalView,\n    __experimentalSpacer,\n    __experimentalScrollable,\n    __experimentalVStack,\n    CheckboxControl,\n    SearchControl,\n    ToggleControl\n} = wp.components;\nconst {withSelect} = window.wp.data;\nconst { serverSideRender: ServerSideRender } = wp;\n\nconst CategorySelect = function(props) {\n    const [ searchText, setSearchText ] = useState('');\n    const categories = props.categories ? props.categories : [];\n    const [ items, setItems ] = useState(categories);\n    const selected = props.selected ? props.selected : [];\n\n    const list = [];\n    for (const item of items) {\n\n        list.push(\n            createElement(\n                CheckboxControl,\n                {\n                    label: item.label,\n                    checked: selected.indexOf( item.value ) !== -1 ,\n                    key: item.label,\n                    style: { marginBottom: 5 },\n                    onChange: function(value) {\n                        if ( props.onSelect ) {\n                            props.onSelect( item.value, value );\n                        }\n                    }\n                }\n            ),\n        );\n    }\n    var elements = [\n        createElement(\n            __experimentalSpacer,\n            { marginBottom: 5 },\n            createElement(\n                SearchControl,\n                {\n                    value: searchText,\n                    onChange: function(value) {\n                        const filtered = props.categories.filter(function(item){\n                            return item.label.toLowerCase().indexOf(value) !== -1;\n                        });\n                        setItems(filtered);\n                        setSearchText(value);\n                    }\n                }\n            ),\n        ),\n        createElement(\n            __experimentalScrollable,\n            {\n                style: { maxHeight: 200 }\n            },\n            createElement(__experimentalVStack, {}, list)\n        )\n    ];\n    if ( props.label ) {\n        elements.unshift(\n            createElement(\n                __experimentalSpacer,\n                { marginBottom: 5 },\n                createElement( __experimentalHeading, { level: 5 }, props.label )\n            )\n        );\n    }\n\n     return createElement(\n         __experimentalSpacer,\n         { marginBottom: 10 },\n         createElement(__experimentalView, {}, elements)\n     );\n}\n\nregisterBlockType( 'calendar-plus/calendar', {\n    title: __( 'Events Calendar' ),\n    description: __( 'Displays full events calendar.' ),\n    category:  'widgets',\n    icon: {\n        src: 'calendar-alt',\n    },\n    attributes: {\n        category: {},\n        time_format: {},\n        dow_format: {},\n        month_name_format: {},\n        day_format: {},\n        date_format: {}\n    },\n    edit: withSelect( function( select ) {\n        return {\n            categories: select('core').getEntityRecords('taxonomy', 'calendar_event_category', {per_page: -1})\n        };\n    } )( function( props ) {\n        var categoryOptions = [ { value: '', label: __( 'All' ) } ];\n        \n        if( props.categories ) {\n            props.categories.forEach((category) => {\n                categoryOptions.push({value:category.id, label:category.name});\n            });\n        }\n        \n        return createElement('div', {}, [\n            createElement( 'div', {}, createElement( 'img', {src: CalPlusBlocksOptions.calendar_image} ) ),\n            createElement( InspectorControls, {},\n                createElement( PanelBody, { title: __( 'Calendar Settings' ), initialOpen: true },\n                    createElement(SelectControl, {\n                        value: props.attributes.category,\n                        label: __( 'Category' ),\n                        onChange: function(value){\n                            props.setAttributes( { category: value } );\n                        },\n                        options: categoryOptions\n                    }),\n                    createElement(SelectControl, {\n                        value: props.attributes.time_format,\n                        label: __( 'Time format' ),\n                        onChange: function(value){\n                            props.setAttributes( { time_format: value } );\n                        },\n                        options: [\n                            {value: 'g:i a', label: '11:00 pm'},\n                            {value: 'H:i', label: '23:00'},\n                        ]\n                    }),\n                    createElement(SelectControl, {\n                        value: props.attributes.dow_format,\n                        label: __( 'Day of the week format' ),\n                        onChange: function(value){\n                            props.setAttributes( { dow_format: value } );\n                        },\n                        options: [\n                            {value: 'l', label: 'Sunday'},\n                            {value: 'D', label: 'Sun'},\n                        ]\n                    }),\n                    createElement(SelectControl, {\n                        value: props.attributes.month_name_format,\n                        label: __( 'Month name format' ),\n                        onChange: function(value){\n                            props.setAttributes( { month_name_format: value } );\n                        },\n                        options: [\n                            {value: 'M', label: 'Jan'},\n                            {value: 'F', label: 'January'},\n                        ]\n                    }),\n                    createElement(SelectControl, {\n                        value: props.attributes.day_format,\n                        label: __( 'Day format' ),\n                        onChange: function(value){\n                            props.setAttributes( { day_format: value } );\n                        },\n                        options: [\n                            {value: 'd', label: '09'},\n                            {value: 'j', label: '9'},\n                        ]\n                    }),\n                    createElement(SelectControl, {\n                        value: props.attributes.date_format,\n                        label: __( 'Date format' ),\n                        onChange: function(value){\n                            props.setAttributes( { date_format: value } );\n                        },\n                        options: [\n                            {value: 'd/m', label: '15/09'},\n                            {value: 'j/n', label: '15/9'},\n                            {value: 'm/d', label: '09/15'},\n                            {value: 'n/j', label: '9/15'},\n                        ]\n                    }),\n                )\n            )\n        ] )\n    } ),\n    save(){\n        return null;\n    }\n});\n\nregisterBlockType( 'calendar-plus/event', {\n    title: __( 'Single Event' ),\n    description: __( 'Displays single calendar event.' ),\n    category:  'widgets',\n    icon: {\n        src: 'calendar-alt',\n    },\n    attributes: {\n        event_id: {},\n    },\n    edit(props){\n        return createElement('div', {}, [\n            createElement( 'div', {}, createElement( ServerSideRender, {\n                block: \"calendar-plus/event\",\n                attributes: props.attributes,\n                EmptyResponsePlaceholder: function() {\n                    return createElement( 'div', {}, 'test' );\n                }\n            } ) ),\n            createElement( InspectorControls, {},\n                createElement( PanelBody, { title: __( 'Event Settings' ), initialOpen: true },\n                    createElement(TextControl, {\n                        value: props.attributes.event_id,\n                        label: __( 'Event Id' ),\n                        help: __( 'Use Events > Events on admin area to search for your event by title or ID' ),\n                        type: 'number',\n                        onChange: function(value){\n                            props.setAttributes( { event_id: value } );\n                        },\n                    }),\n                )\n            )\n        ] )\n    },\n    save(){\n        return null;\n    }\n});\n\nregisterBlockType( 'calendar-plus/events-list', {\n    title: __( 'Events List' ),\n    description: __( 'Displays events list.' ),\n    category:  'widgets',\n    icon: {\n        src: 'calendar-alt',\n    },\n    attributes: {\n        events: {\n            default: 5\n        },\n        past_events: {\n            default: false\n        },\n        category: {\n            default: ''\n        },\n        display_location: {\n            type: 'boolean',\n            default: false\n        },\n        display_excerpt: {\n            type: 'boolean',\n            default: false\n        },\n        featured_image: {\n            type: 'boolean',\n            default: false\n        },\n        layout: {\n            default: 'list'\n        },\n        columns: {\n            default: 2\n        }\n    },\n    edit: withSelect( function( select ) {\n        return {\n            categories: select('core').getEntityRecords('taxonomy', 'calendar_event_category', {per_page: -1})\n        };\n    } )( function( props ) {\n        var categoryOptions = [ /* { value: 0, label: __( 'All' ) } */ ];\n        var selectedCategories = props.attributes.category\n            .split( ',' )\n            .map(\n                function( value ){\n                    return parseInt( value.trim() );\n                }\n            )\n            .filter(\n                function(num) {\n                    return ! isNaN( num );\n                }\n            );\n        \n        if( props.categories ) {\n            props.categories.forEach((category) => {\n                categoryOptions.push({value:category.id, label:category.name});\n            });\n        }\n        const eventsSettings = [\n            createElement(RangeControl, {\n                value: props.attributes.events,\n                label: __( 'Number of events' ),\n                onChange: function(value){\n                    props.setAttributes( { events: value } );\n                },\n                min: 1,\n                max: 100,\n            }),\n            createElement(\n                CategorySelect,\n                {\n                    label: __( 'Category' ),\n                    categories: categoryOptions,\n                    selected: selectedCategories,\n                    onSelect: function(id, value) {\n                        /*\n                        if ( ! id ) {\n                            if ( value ) {\n                                selectedCategories = props.categories.map(\n                                    function( item ) {\n                                        return item.id;\n                                    }\n                                );\n                                selectedCategories.push( 0 );\n                                props.setAttributes( { category: selectedCategories.join( ',' ) } );\n                            } else {\n                                props.setAttributes( { category: '' } );\n                            }\n\n\n                            return;\n                        }\n                        */\n\n                        const index = selectedCategories.indexOf( id );\n\n                        if ( value && index === -1 ) {\n                            selectedCategories.push( id );\n                        } else if ( index !== -1 ) {\n                            delete selectedCategories[ index ];\n                        }\n                        props.setAttributes( {\n                            category: selectedCategories.join( ',' )\n                        } );\n                    }\n                }\n            ),\n            createElement(ToggleControl, {\n                value: props.attributes.past_events,\n                checked: props.attributes.past_events,\n                label: __( 'Display past events' ),\n                onChange: function(value){\n                    props.setAttributes( { past_events: value } );\n                }\n            }),\n            createElement(__experimentalView, {}, [\n                createElement(\n                    __experimentalSpacer,\n                    {},\n                    createElement(\n                        __experimentalHeading,\n                        { level: 5 },\n                        __( 'Choose fields to display' )\n                    ),\n                ),\n                createElement(\n                    CheckboxControl,\n                    {\n                        label: __( 'Location' ),\n                        checked: props.attributes.display_location,\n                        onChange: function(value) {\n                            props.setAttributes( { display_location: value } );\n                        }\n                    }\n                ),\n                createElement(\n                    CheckboxControl,\n                    {\n                        label: __( 'Excerpt' ),\n                        checked: props.attributes.display_excerpt,\n                        onChange: function(value) {\n                            props.setAttributes( { display_excerpt: value } );\n                        }\n                    }\n                ),\n                createElement(\n                    CheckboxControl, \n                    {\n                        label: __( 'Featured image' ),\n                        checked: props.attributes.featured_image,\n                        onChange: function(value){\n                            props.setAttributes( {featured_image: value} );\n                        }\n                    }\n                ),\n            ]),\n            createElement(SelectControl, {\n                value: props.attributes.layout,\n                label: __( 'Layout' ),\n                options: [\n                    {value: 'list', label: __('List')},\n                    {value: 'grid', label: __('Grid')}\n                ],\n                onChange: function(value){\n                    props.setAttributes( { layout: value } );\n                }\n            }),\n        ];\n        if(props.attributes.layout === 'grid') {\n            eventsSettings.push(createElement(SelectControl, {\n                value: props.attributes.columns,\n                label: __( 'Grid size' ),\n                options: [\n                    {value: 2, 'label': __('2 Columns')},\n                    {value: 3, 'label': __('3 Columns')},\n                    {value: 4, 'label': __('4 Columns')}\n                ],\n                onChange: function(value){\n                    props.setAttributes( { columns: parseInt(value) } );\n                }\n            }));\n        }\n\n        return createElement('div', {}, [\n            createElement( 'div', {}, createElement( ServerSideRender, {\n                block: \"calendar-plus/events-list\",\n                attributes: props.attributes,\n            } ) ),\n            createElement( InspectorControls, {},\n                createElement( PanelBody, { title: __( 'Events Settings' ), initialOpen: true },\n                    ...eventsSettings\n                )\n            )\n        ] )\n    } ),\n    save(){\n        return null;\n    }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9fc3JjL2FkbWluL2VkaXRvci1zaG9ydGNvZGUvZWRpdG9yLWJsb2Nrcy5qcz85Mjc1Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sa0JBQWtCO0FBQ3pCLE9BQU8sd0JBQXdCO0FBQy9CLE9BQU8sR0FBRztBQUNWLE9BQU8sa0JBQWtCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELE9BQU8sV0FBVztBQUNsQixPQUFPLHFDQUFxQzs7QUFFNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGtCQUFrQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGtCQUFrQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEIsYUFBYTtBQUNiLGtEQUFrRDtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsa0JBQWtCO0FBQ25DLHVEQUF1RCxXQUFXO0FBQ2xFO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVSxtQkFBbUI7QUFDN0IsNkNBQTZDO0FBQzdDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0Esb0JBQW9CO0FBQ3BCLHVCQUF1QjtBQUN2QixzQkFBc0I7QUFDdEIsNkJBQTZCO0FBQzdCLHNCQUFzQjtBQUN0QjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsZ0dBQWdHLGFBQWE7QUFDN0c7QUFDQSxLQUFLO0FBQ0ws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QUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxxQkFBcUI7QUFDL0Q7QUFDQSxhQUFhO0FBQ2IsZ0RBQWdEO0FBQ2hEO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBLHlCQUF5QixXQUFXO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCwwQkFBMEI7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELHlCQUF5QjtBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0Qsc0JBQXNCO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsaUNBQWlDO0FBQ3RELHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EsMENBQTBDLGdCQUFnQjtBQUMxRDtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsbUNBQW1DO0FBQ3hELHFCQUFxQixtQ0FBbUM7QUFDeEQscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSwwQ0FBMEMsMkJBQTJCO0FBQ3JFO0FBQ0EsYUFBYTtBQUNiOztBQUVBLHNDQUFzQztBQUN0QyxvQ0FBb0M7QUFDcEM7QUFDQTtBQUNBLGFBQWE7QUFDYixnREFBZ0Q7QUFDaEQsMkNBQTJDLG9EQUFvRDtBQUMvRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxDQUFDIiwiZmlsZSI6IjEzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qge3JlZ2lzdGVyQmxvY2tUeXBlfSA9IHdwLmJsb2NrcztcbmNvbnN0IHtjcmVhdGVFbGVtZW50LCB1c2VTdGF0ZX0gPSB3cC5lbGVtZW50O1xuY29uc3Qge19ffSA9IHdwLmkxOG47XG5jb25zdCB7SW5zcGVjdG9yQ29udHJvbHN9ID0gd3AuZWRpdG9yO1xuY29uc3Qge1xuICAgIFRleHRDb250cm9sLFxuICAgIFJhbmdlQ29udHJvbCxcbiAgICBTZWxlY3RDb250cm9sLFxuICAgIFBhbmVsQm9keSxcbiAgICBfX2V4cGVyaW1lbnRhbEhlYWRpbmcsXG4gICAgX19leHBlcmltZW50YWxWaWV3LFxuICAgIF9fZXhwZXJpbWVudGFsU3BhY2VyLFxuICAgIF9fZXhwZXJpbWVudGFsU2Nyb2xsYWJsZSxcbiAgICBfX2V4cGVyaW1lbnRhbFZTdGFjayxcbiAgICBDaGVja2JveENvbnRyb2wsXG4gICAgU2VhcmNoQ29udHJvbCxcbiAgICBUb2dnbGVDb250cm9sXG59ID0gd3AuY29tcG9uZW50cztcbmNvbnN0IHt3aXRoU2VsZWN0fSA9IHdpbmRvdy53cC5kYXRhO1xuY29uc3QgeyBzZXJ2ZXJTaWRlUmVuZGVyOiBTZXJ2ZXJTaWRlUmVuZGVyIH0gPSB3cDtcblxuY29uc3QgQ2F0ZWdvcnlTZWxlY3QgPSBmdW5jdGlvbihwcm9wcykge1xuICAgIGNvbnN0IFsgc2VhcmNoVGV4dCwgc2V0U2VhcmNoVGV4dCBdID0gdXNlU3RhdGUoJycpO1xuICAgIGNvbnN0IGNhdGVnb3JpZXMgPSBwcm9wcy5jYXRlZ29yaWVzID8gcHJvcHMuY2F0ZWdvcmllcyA6IFtdO1xuICAgIGNvbnN0IFsgaXRlbXMsIHNldEl0ZW1zIF0gPSB1c2VTdGF0ZShjYXRlZ29yaWVzKTtcbiAgICBjb25zdCBzZWxlY3RlZCA9IHByb3BzLnNlbGVjdGVkID8gcHJvcHMuc2VsZWN0ZWQgOiBbXTtcblxuICAgIGNvbnN0IGxpc3QgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcblxuICAgICAgICBsaXN0LnB1c2goXG4gICAgICAgICAgICBjcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgIENoZWNrYm94Q29udHJvbCxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpdGVtLmxhYmVsLFxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiBzZWxlY3RlZC5pbmRleE9mKCBpdGVtLnZhbHVlICkgIT09IC0xICxcbiAgICAgICAgICAgICAgICAgICAga2V5OiBpdGVtLmxhYmVsLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogeyBtYXJnaW5Cb3R0b206IDUgfSxcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHByb3BzLm9uU2VsZWN0ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLm9uU2VsZWN0KCBpdGVtLnZhbHVlLCB2YWx1ZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKSxcbiAgICAgICAgKTtcbiAgICB9XG4gICAgdmFyIGVsZW1lbnRzID0gW1xuICAgICAgICBjcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgX19leHBlcmltZW50YWxTcGFjZXIsXG4gICAgICAgICAgICB7IG1hcmdpbkJvdHRvbTogNSB9LFxuICAgICAgICAgICAgY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICBTZWFyY2hDb250cm9sLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlYXJjaFRleHQsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsdGVyZWQgPSBwcm9wcy5jYXRlZ29yaWVzLmZpbHRlcihmdW5jdGlvbihpdGVtKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5sYWJlbC50b0xvd2VyQ2FzZSgpLmluZGV4T2YodmFsdWUpICE9PSAtMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0SXRlbXMoZmlsdGVyZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0U2VhcmNoVGV4dCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApLFxuICAgICAgICApLFxuICAgICAgICBjcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgX19leHBlcmltZW50YWxTY3JvbGxhYmxlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHN0eWxlOiB7IG1heEhlaWdodDogMjAwIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjcmVhdGVFbGVtZW50KF9fZXhwZXJpbWVudGFsVlN0YWNrLCB7fSwgbGlzdClcbiAgICAgICAgKVxuICAgIF07XG4gICAgaWYgKCBwcm9wcy5sYWJlbCApIHtcbiAgICAgICAgZWxlbWVudHMudW5zaGlmdChcbiAgICAgICAgICAgIGNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgX19leHBlcmltZW50YWxTcGFjZXIsXG4gICAgICAgICAgICAgICAgeyBtYXJnaW5Cb3R0b206IDUgfSxcbiAgICAgICAgICAgICAgICBjcmVhdGVFbGVtZW50KCBfX2V4cGVyaW1lbnRhbEhlYWRpbmcsIHsgbGV2ZWw6IDUgfSwgcHJvcHMubGFiZWwgKVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cblxuICAgICByZXR1cm4gY3JlYXRlRWxlbWVudChcbiAgICAgICAgIF9fZXhwZXJpbWVudGFsU3BhY2VyLFxuICAgICAgICAgeyBtYXJnaW5Cb3R0b206IDEwIH0sXG4gICAgICAgICBjcmVhdGVFbGVtZW50KF9fZXhwZXJpbWVudGFsVmlldywge30sIGVsZW1lbnRzKVxuICAgICApO1xufVxuXG5yZWdpc3RlckJsb2NrVHlwZSggJ2NhbGVuZGFyLXBsdXMvY2FsZW5kYXInLCB7XG4gICAgdGl0bGU6IF9fKCAnRXZlbnRzIENhbGVuZGFyJyApLFxuICAgIGRlc2NyaXB0aW9uOiBfXyggJ0Rpc3BsYXlzIGZ1bGwgZXZlbnRzIGNhbGVuZGFyLicgKSxcbiAgICBjYXRlZ29yeTogICd3aWRnZXRzJyxcbiAgICBpY29uOiB7XG4gICAgICAgIHNyYzogJ2NhbGVuZGFyLWFsdCcsXG4gICAgfSxcbiAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgIGNhdGVnb3J5OiB7fSxcbiAgICAgICAgdGltZV9mb3JtYXQ6IHt9LFxuICAgICAgICBkb3dfZm9ybWF0OiB7fSxcbiAgICAgICAgbW9udGhfbmFtZV9mb3JtYXQ6IHt9LFxuICAgICAgICBkYXlfZm9ybWF0OiB7fSxcbiAgICAgICAgZGF0ZV9mb3JtYXQ6IHt9XG4gICAgfSxcbiAgICBlZGl0OiB3aXRoU2VsZWN0KCBmdW5jdGlvbiggc2VsZWN0ICkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2F0ZWdvcmllczogc2VsZWN0KCdjb3JlJykuZ2V0RW50aXR5UmVjb3JkcygndGF4b25vbXknLCAnY2FsZW5kYXJfZXZlbnRfY2F0ZWdvcnknLCB7cGVyX3BhZ2U6IC0xfSlcbiAgICAgICAgfTtcbiAgICB9ICkoIGZ1bmN0aW9uKCBwcm9wcyApIHtcbiAgICAgICAgdmFyIGNhdGVnb3J5T3B0aW9ucyA9IFsgeyB2YWx1ZTogJycsIGxhYmVsOiBfXyggJ0FsbCcgKSB9IF07XG4gICAgICAgIFxuICAgICAgICBpZiggcHJvcHMuY2F0ZWdvcmllcyApIHtcbiAgICAgICAgICAgIHByb3BzLmNhdGVnb3JpZXMuZm9yRWFjaCgoY2F0ZWdvcnkpID0+IHtcbiAgICAgICAgICAgICAgICBjYXRlZ29yeU9wdGlvbnMucHVzaCh7dmFsdWU6Y2F0ZWdvcnkuaWQsIGxhYmVsOmNhdGVnb3J5Lm5hbWV9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gY3JlYXRlRWxlbWVudCgnZGl2Jywge30sIFtcbiAgICAgICAgICAgIGNyZWF0ZUVsZW1lbnQoICdkaXYnLCB7fSwgY3JlYXRlRWxlbWVudCggJ2ltZycsIHtzcmM6IENhbFBsdXNCbG9ja3NPcHRpb25zLmNhbGVuZGFyX2ltYWdlfSApICksXG4gICAgICAgICAgICBjcmVhdGVFbGVtZW50KCBJbnNwZWN0b3JDb250cm9scywge30sXG4gICAgICAgICAgICAgICAgY3JlYXRlRWxlbWVudCggUGFuZWxCb2R5LCB7IHRpdGxlOiBfXyggJ0NhbGVuZGFyIFNldHRpbmdzJyApLCBpbml0aWFsT3BlbjogdHJ1ZSB9LFxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVFbGVtZW50KFNlbGVjdENvbnRyb2wsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBwcm9wcy5hdHRyaWJ1dGVzLmNhdGVnb3J5LFxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IF9fKCAnQ2F0ZWdvcnknICksXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24odmFsdWUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLnNldEF0dHJpYnV0ZXMoIHsgY2F0ZWdvcnk6IHZhbHVlIH0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBjYXRlZ29yeU9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZUVsZW1lbnQoU2VsZWN0Q29udHJvbCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHByb3BzLmF0dHJpYnV0ZXMudGltZV9mb3JtYXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogX18oICdUaW1lIGZvcm1hdCcgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHMuc2V0QXR0cmlidXRlcyggeyB0aW1lX2Zvcm1hdDogdmFsdWUgfSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dmFsdWU6ICdnOmkgYScsIGxhYmVsOiAnMTE6MDAgcG0nfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dmFsdWU6ICdIOmknLCBsYWJlbDogJzIzOjAwJ30sXG4gICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVFbGVtZW50KFNlbGVjdENvbnRyb2wsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBwcm9wcy5hdHRyaWJ1dGVzLmRvd19mb3JtYXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogX18oICdEYXkgb2YgdGhlIHdlZWsgZm9ybWF0JyApLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wcy5zZXRBdHRyaWJ1dGVzKCB7IGRvd19mb3JtYXQ6IHZhbHVlIH0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3ZhbHVlOiAnbCcsIGxhYmVsOiAnU3VuZGF5J30sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3ZhbHVlOiAnRCcsIGxhYmVsOiAnU3VuJ30sXG4gICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVFbGVtZW50KFNlbGVjdENvbnRyb2wsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBwcm9wcy5hdHRyaWJ1dGVzLm1vbnRoX25hbWVfZm9ybWF0LFxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IF9fKCAnTW9udGggbmFtZSBmb3JtYXQnICksXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24odmFsdWUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLnNldEF0dHJpYnV0ZXMoIHsgbW9udGhfbmFtZV9mb3JtYXQ6IHZhbHVlIH0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3ZhbHVlOiAnTScsIGxhYmVsOiAnSmFuJ30sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3ZhbHVlOiAnRicsIGxhYmVsOiAnSmFudWFyeSd9LFxuICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlRWxlbWVudChTZWxlY3RDb250cm9sLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcHJvcHMuYXR0cmlidXRlcy5kYXlfZm9ybWF0LFxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IF9fKCAnRGF5IGZvcm1hdCcgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHMuc2V0QXR0cmlidXRlcyggeyBkYXlfZm9ybWF0OiB2YWx1ZSB9ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt2YWx1ZTogJ2QnLCBsYWJlbDogJzA5J30sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3ZhbHVlOiAnaicsIGxhYmVsOiAnOSd9LFxuICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlRWxlbWVudChTZWxlY3RDb250cm9sLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcHJvcHMuYXR0cmlidXRlcy5kYXRlX2Zvcm1hdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBfXyggJ0RhdGUgZm9ybWF0JyApLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wcy5zZXRBdHRyaWJ1dGVzKCB7IGRhdGVfZm9ybWF0OiB2YWx1ZSB9ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt2YWx1ZTogJ2QvbScsIGxhYmVsOiAnMTUvMDknfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dmFsdWU6ICdqL24nLCBsYWJlbDogJzE1LzknfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dmFsdWU6ICdtL2QnLCBsYWJlbDogJzA5LzE1J30sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3ZhbHVlOiAnbi9qJywgbGFiZWw6ICc5LzE1J30sXG4gICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgXSApXG4gICAgfSApLFxuICAgIHNhdmUoKXtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufSk7XG5cbnJlZ2lzdGVyQmxvY2tUeXBlKCAnY2FsZW5kYXItcGx1cy9ldmVudCcsIHtcbiAgICB0aXRsZTogX18oICdTaW5nbGUgRXZlbnQnICksXG4gICAgZGVzY3JpcHRpb246IF9fKCAnRGlzcGxheXMgc2luZ2xlIGNhbGVuZGFyIGV2ZW50LicgKSxcbiAgICBjYXRlZ29yeTogICd3aWRnZXRzJyxcbiAgICBpY29uOiB7XG4gICAgICAgIHNyYzogJ2NhbGVuZGFyLWFsdCcsXG4gICAgfSxcbiAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgIGV2ZW50X2lkOiB7fSxcbiAgICB9LFxuICAgIGVkaXQocHJvcHMpe1xuICAgICAgICByZXR1cm4gY3JlYXRlRWxlbWVudCgnZGl2Jywge30sIFtcbiAgICAgICAgICAgIGNyZWF0ZUVsZW1lbnQoICdkaXYnLCB7fSwgY3JlYXRlRWxlbWVudCggU2VydmVyU2lkZVJlbmRlciwge1xuICAgICAgICAgICAgICAgIGJsb2NrOiBcImNhbGVuZGFyLXBsdXMvZXZlbnRcIixcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBwcm9wcy5hdHRyaWJ1dGVzLFxuICAgICAgICAgICAgICAgIEVtcHR5UmVzcG9uc2VQbGFjZWhvbGRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVFbGVtZW50KCAnZGl2Jywge30sICd0ZXN0JyApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gKSApLFxuICAgICAgICAgICAgY3JlYXRlRWxlbWVudCggSW5zcGVjdG9yQ29udHJvbHMsIHt9LFxuICAgICAgICAgICAgICAgIGNyZWF0ZUVsZW1lbnQoIFBhbmVsQm9keSwgeyB0aXRsZTogX18oICdFdmVudCBTZXR0aW5ncycgKSwgaW5pdGlhbE9wZW46IHRydWUgfSxcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlRWxlbWVudChUZXh0Q29udHJvbCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHByb3BzLmF0dHJpYnV0ZXMuZXZlbnRfaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogX18oICdFdmVudCBJZCcgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlbHA6IF9fKCAnVXNlIEV2ZW50cyA+IEV2ZW50cyBvbiBhZG1pbiBhcmVhIHRvIHNlYXJjaCBmb3IgeW91ciBldmVudCBieSB0aXRsZSBvciBJRCcgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wcy5zZXRBdHRyaWJ1dGVzKCB7IGV2ZW50X2lkOiB2YWx1ZSB9ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgIF0gKVxuICAgIH0sXG4gICAgc2F2ZSgpe1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59KTtcblxucmVnaXN0ZXJCbG9ja1R5cGUoICdjYWxlbmRhci1wbHVzL2V2ZW50cy1saXN0Jywge1xuICAgIHRpdGxlOiBfXyggJ0V2ZW50cyBMaXN0JyApLFxuICAgIGRlc2NyaXB0aW9uOiBfXyggJ0Rpc3BsYXlzIGV2ZW50cyBsaXN0LicgKSxcbiAgICBjYXRlZ29yeTogICd3aWRnZXRzJyxcbiAgICBpY29uOiB7XG4gICAgICAgIHNyYzogJ2NhbGVuZGFyLWFsdCcsXG4gICAgfSxcbiAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgIGV2ZW50czoge1xuICAgICAgICAgICAgZGVmYXVsdDogNVxuICAgICAgICB9LFxuICAgICAgICBwYXN0X2V2ZW50czoge1xuICAgICAgICAgICAgZGVmYXVsdDogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgY2F0ZWdvcnk6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6ICcnXG4gICAgICAgIH0sXG4gICAgICAgIGRpc3BsYXlfbG9jYXRpb246IHtcbiAgICAgICAgICAgIHR5cGU6ICdib29sZWFuJyxcbiAgICAgICAgICAgIGRlZmF1bHQ6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIGRpc3BsYXlfZXhjZXJwdDoge1xuICAgICAgICAgICAgdHlwZTogJ2Jvb2xlYW4nLFxuICAgICAgICAgICAgZGVmYXVsdDogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgZmVhdHVyZWRfaW1hZ2U6IHtcbiAgICAgICAgICAgIHR5cGU6ICdib29sZWFuJyxcbiAgICAgICAgICAgIGRlZmF1bHQ6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIGxheW91dDoge1xuICAgICAgICAgICAgZGVmYXVsdDogJ2xpc3QnXG4gICAgICAgIH0sXG4gICAgICAgIGNvbHVtbnM6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IDJcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZWRpdDogd2l0aFNlbGVjdCggZnVuY3Rpb24oIHNlbGVjdCApIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNhdGVnb3JpZXM6IHNlbGVjdCgnY29yZScpLmdldEVudGl0eVJlY29yZHMoJ3RheG9ub215JywgJ2NhbGVuZGFyX2V2ZW50X2NhdGVnb3J5Jywge3Blcl9wYWdlOiAtMX0pXG4gICAgICAgIH07XG4gICAgfSApKCBmdW5jdGlvbiggcHJvcHMgKSB7XG4gICAgICAgIHZhciBjYXRlZ29yeU9wdGlvbnMgPSBbIC8qIHsgdmFsdWU6IDAsIGxhYmVsOiBfXyggJ0FsbCcgKSB9ICovIF07XG4gICAgICAgIHZhciBzZWxlY3RlZENhdGVnb3JpZXMgPSBwcm9wcy5hdHRyaWJ1dGVzLmNhdGVnb3J5XG4gICAgICAgICAgICAuc3BsaXQoICcsJyApXG4gICAgICAgICAgICAubWFwKFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCB2YWx1ZSApe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoIHZhbHVlLnRyaW0oKSApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5maWx0ZXIoXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24obnVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhIGlzTmFOKCBudW0gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgaWYoIHByb3BzLmNhdGVnb3JpZXMgKSB7XG4gICAgICAgICAgICBwcm9wcy5jYXRlZ29yaWVzLmZvckVhY2goKGNhdGVnb3J5KSA9PiB7XG4gICAgICAgICAgICAgICAgY2F0ZWdvcnlPcHRpb25zLnB1c2goe3ZhbHVlOmNhdGVnb3J5LmlkLCBsYWJlbDpjYXRlZ29yeS5uYW1lfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBldmVudHNTZXR0aW5ncyA9IFtcbiAgICAgICAgICAgIGNyZWF0ZUVsZW1lbnQoUmFuZ2VDb250cm9sLCB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHByb3BzLmF0dHJpYnV0ZXMuZXZlbnRzLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBfXyggJ051bWJlciBvZiBldmVudHMnICksXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgICAgICAgICAgICAgICAgcHJvcHMuc2V0QXR0cmlidXRlcyggeyBldmVudHM6IHZhbHVlIH0gKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1pbjogMSxcbiAgICAgICAgICAgICAgICBtYXg6IDEwMCxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICBDYXRlZ29yeVNlbGVjdCxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBfXyggJ0NhdGVnb3J5JyApLFxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yaWVzOiBjYXRlZ29yeU9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBzZWxlY3RlZENhdGVnb3JpZXMsXG4gICAgICAgICAgICAgICAgICAgIG9uU2VsZWN0OiBmdW5jdGlvbihpZCwgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoICEgaWQgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB2YWx1ZSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDYXRlZ29yaWVzID0gcHJvcHMuY2F0ZWdvcmllcy5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiggaXRlbSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDYXRlZ29yaWVzLnB1c2goIDAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHMuc2V0QXR0cmlidXRlcyggeyBjYXRlZ29yeTogc2VsZWN0ZWRDYXRlZ29yaWVzLmpvaW4oICcsJyApIH0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wcy5zZXRBdHRyaWJ1dGVzKCB7IGNhdGVnb3J5OiAnJyB9ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHNlbGVjdGVkQ2F0ZWdvcmllcy5pbmRleE9mKCBpZCApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHZhbHVlICYmIGluZGV4ID09PSAtMSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZENhdGVnb3JpZXMucHVzaCggaWQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIGluZGV4ICE9PSAtMSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgc2VsZWN0ZWRDYXRlZ29yaWVzWyBpbmRleCBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHMuc2V0QXR0cmlidXRlcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBzZWxlY3RlZENhdGVnb3JpZXMuam9pbiggJywnIClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBjcmVhdGVFbGVtZW50KFRvZ2dsZUNvbnRyb2wsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcHJvcHMuYXR0cmlidXRlcy5wYXN0X2V2ZW50cyxcbiAgICAgICAgICAgICAgICBjaGVja2VkOiBwcm9wcy5hdHRyaWJ1dGVzLnBhc3RfZXZlbnRzLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBfXyggJ0Rpc3BsYXkgcGFzdCBldmVudHMnICksXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgICAgICAgICAgICAgICAgcHJvcHMuc2V0QXR0cmlidXRlcyggeyBwYXN0X2V2ZW50czogdmFsdWUgfSApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgY3JlYXRlRWxlbWVudChfX2V4cGVyaW1lbnRhbFZpZXcsIHt9LCBbXG4gICAgICAgICAgICAgICAgY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgX19leHBlcmltZW50YWxTcGFjZXIsXG4gICAgICAgICAgICAgICAgICAgIHt9LFxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgX19leHBlcmltZW50YWxIZWFkaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBsZXZlbDogNSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgX18oICdDaG9vc2UgZmllbGRzIHRvIGRpc3BsYXknIClcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIGNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgIENoZWNrYm94Q29udHJvbCxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IF9fKCAnTG9jYXRpb24nICksXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiBwcm9wcy5hdHRyaWJ1dGVzLmRpc3BsYXlfbG9jYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wcy5zZXRBdHRyaWJ1dGVzKCB7IGRpc3BsYXlfbG9jYXRpb246IHZhbHVlIH0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgQ2hlY2tib3hDb250cm9sLFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogX18oICdFeGNlcnB0JyApLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogcHJvcHMuYXR0cmlidXRlcy5kaXNwbGF5X2V4Y2VycHQsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wcy5zZXRBdHRyaWJ1dGVzKCB7IGRpc3BsYXlfZXhjZXJwdDogdmFsdWUgfSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBjcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICBDaGVja2JveENvbnRyb2wsIFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogX18oICdGZWF0dXJlZCBpbWFnZScgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ6IHByb3BzLmF0dHJpYnV0ZXMuZmVhdHVyZWRfaW1hZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24odmFsdWUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLnNldEF0dHJpYnV0ZXMoIHtmZWF0dXJlZF9pbWFnZTogdmFsdWV9ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgXSksXG4gICAgICAgICAgICBjcmVhdGVFbGVtZW50KFNlbGVjdENvbnRyb2wsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcHJvcHMuYXR0cmlidXRlcy5sYXlvdXQsXG4gICAgICAgICAgICAgICAgbGFiZWw6IF9fKCAnTGF5b3V0JyApLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IFtcbiAgICAgICAgICAgICAgICAgICAge3ZhbHVlOiAnbGlzdCcsIGxhYmVsOiBfXygnTGlzdCcpfSxcbiAgICAgICAgICAgICAgICAgICAge3ZhbHVlOiAnZ3JpZCcsIGxhYmVsOiBfXygnR3JpZCcpfVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgICAgICAgICAgICAgICAgcHJvcHMuc2V0QXR0cmlidXRlcyggeyBsYXlvdXQ6IHZhbHVlIH0gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgXTtcbiAgICAgICAgaWYocHJvcHMuYXR0cmlidXRlcy5sYXlvdXQgPT09ICdncmlkJykge1xuICAgICAgICAgICAgZXZlbnRzU2V0dGluZ3MucHVzaChjcmVhdGVFbGVtZW50KFNlbGVjdENvbnRyb2wsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcHJvcHMuYXR0cmlidXRlcy5jb2x1bW5zLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBfXyggJ0dyaWQgc2l6ZScgKSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBbXG4gICAgICAgICAgICAgICAgICAgIHt2YWx1ZTogMiwgJ2xhYmVsJzogX18oJzIgQ29sdW1ucycpfSxcbiAgICAgICAgICAgICAgICAgICAge3ZhbHVlOiAzLCAnbGFiZWwnOiBfXygnMyBDb2x1bW5zJyl9LFxuICAgICAgICAgICAgICAgICAgICB7dmFsdWU6IDQsICdsYWJlbCc6IF9fKCc0IENvbHVtbnMnKX1cbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICAgICAgICAgICAgICAgIHByb3BzLnNldEF0dHJpYnV0ZXMoIHsgY29sdW1uczogcGFyc2VJbnQodmFsdWUpIH0gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY3JlYXRlRWxlbWVudCgnZGl2Jywge30sIFtcbiAgICAgICAgICAgIGNyZWF0ZUVsZW1lbnQoICdkaXYnLCB7fSwgY3JlYXRlRWxlbWVudCggU2VydmVyU2lkZVJlbmRlciwge1xuICAgICAgICAgICAgICAgIGJsb2NrOiBcImNhbGVuZGFyLXBsdXMvZXZlbnRzLWxpc3RcIixcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBwcm9wcy5hdHRyaWJ1dGVzLFxuICAgICAgICAgICAgfSApICksXG4gICAgICAgICAgICBjcmVhdGVFbGVtZW50KCBJbnNwZWN0b3JDb250cm9scywge30sXG4gICAgICAgICAgICAgICAgY3JlYXRlRWxlbWVudCggUGFuZWxCb2R5LCB7IHRpdGxlOiBfXyggJ0V2ZW50cyBTZXR0aW5ncycgKSwgaW5pdGlhbE9wZW46IHRydWUgfSxcbiAgICAgICAgICAgICAgICAgICAgLi4uZXZlbnRzU2V0dGluZ3NcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgIF0gKVxuICAgIH0gKSxcbiAgICBzYXZlKCl7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn0pOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///13\n")}});